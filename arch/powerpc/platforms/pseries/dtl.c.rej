***************
*** 181,187 ****
  
  	lppaca_of(dtl->cpu).dtl_enable_mask = 0x0;
  
- 	unregister_dtl(hwcpu, __pa(dtl->buf));
  }
  
  static u64 dtl_current_index(struct dtl *dtl)
--- 181,187 ----
  
  	lppaca_of(dtl->cpu).dtl_enable_mask = 0x0;
  
+ 	unregister_dtl(hwcpu);
  }
  
  static u64 dtl_current_index(struct dtl *dtl)
